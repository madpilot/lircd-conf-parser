{"version":3,"sources":["../src/index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["const constants = {\n  STATE_START: 1,\n  STATE_REMOTE: 2,\n  STATE_CODES: 3\n}\n\nexport default class LircdConf {\n  constructor(config) {\n    this.config = config;\n    this.state = constants.STATE_START;\n  }\n\n  static parse() {\n  }\n\n  convertTabs(string) {\n    return string.replace(/\\t/g, ' ');\n  }\n\n  removeComments(string) {\n    return string.replace(/#.+/g, '');\n  }\n\n  isBeginRemote(line) {\n    return line.match(/begin \\s*remote/i) !== null;\n  }\n\n  isEndRemote(line) {\n    return line.match(/end \\s*remote/i) !== null;\n  }\n\n  isBeginCodes(line) {\n    return line.match(/begin \\s*codes/i) !== null;\n  }\n\n  isEndCodes(line) {\n    return line.match(/end \\s*codes/i) !== null;\n  }\n\n  trim(string) {\n    return string.replace(/^\\s+|\\s+$/g, '');\n  }\n\n  removeExtraWhitespace(string) {\n    return string.replace(/\\s+/g, ' ');\n  }\n\n  parseAttribute(line) {\n    let re = line.match(/^\\s*(\\S+)\\s*(.*)$/);\n\n    if(re) {\n      return { key: this.trim(re[1]), value: this.removeExtraWhitespace(this.trim(re[2])) };\n    }\n    return null;\n  }\n\n  \n\n  parse() {\n    let config = this.convertTabs(this.config);\n    config = this.removeComments(config);\n\n    let result = {\n      remotes: []\n    };\n\n    let currentRemote = {};\n    config.split(\"\\n\").forEach((line) => {\n      switch(this.state) {\n      case constants.STATE_REMOTE:\n        if(this.isEndRemote(line)) {\n          result.remotes.push(currentRemote);\n          this.state = constants.STATE_START;\n        } else if(this.isBeginCodes(line)) {\n          currentRemote.codes = {};\n          this.state = constants.STATE_CODES;\n        } else {\n          let attribute = this.parseAttribute(line);\n          if(attribute !== null) {\n            currentRemote[attribute.key] = attribute.value;\n          }\n        }\n        break;\n      case constants.STATE_CODES:\n        if(this.isEndCodes(line)) {\n          this.state = constants.STATE_REMOTE;\n        } else {\n          let code = this.parseAttribute(line);\n          if(code !== null) {\n            currentRemote.codes[code.key] = code.value;\n          }\n        }\n        break;\n      default:\n        if(this.isBeginRemote(line)) {\n          let currentRemote = {};\n          this.state = constants.STATE_REMOTE;\n        }\n        break;\n      }\n    });\n\n    if(this.state === constants.STATE_CODES) {\n      throw(new Error(\"Missing end codes\"));\n    }\n    \n    if(this.state !== constants.STATE_START) {\n      throw(new Error(\"Missing end remote\"));\n    }\n\n    return result;\n  }\n}\n"]}